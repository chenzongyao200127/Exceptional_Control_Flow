# Tools for Manipulating Processes
# 操作进程的工具

Linux 系统提供了大量的监控和操作进程的有用工具。

- `STRACE`：打印一个正在运行的程序和它的子进程调用的每个系统调用的轨迹。对于好奇的学生而言，这是一个令人着迷的工具。用 -static 编译你的程序，能得到一个更干净的、不带有大量与共享库相关的输出的轨迹。
- `PS`：列出当前系统中的进程（包括僵死进程）。
- `TOP`：打印出关于当前进程资源使用的信息。
- `PMAP`：显示进程的内存映射。
- `/proc`：一个虚拟文件系统，以 ASCII 文本格式输出大量内核数据结构的内容，用户程序可以读取这些内容。比如，输入 “cat/proc/loadavg”，可以看到你的 Linux 系统上当前的平均负载。

这些工具都是 Linux 系统中非常重要的命令行工具，用于监控和分析系统和应用程序的行为。下面是每个工具的常用方法和一些示例：

### 1. `strace`

`strace` 用于跟踪一个正在运行的程序和它的子进程所调用的每个系统调用。

- **基本用法**：`strace <command>`
- **跟踪特定进程**：`strace -p <pid>`，其中 `<pid>` 是进程的 ID。
- **过滤特定系统调用**：`strace -e trace=<syscall> <command>`，例如 `strace -e trace=open,read <command>`。
- **使用 `-static` 编译**：当程序使用 `-static` 选项编译时，它不依赖于动态链接的库，这使得 `strace` 的输出更简洁，主要显示程序本身的系统调用。

### 2. `ps`

`ps` 用于列出当前系统中的进程。

- **基本用法**：`ps aux` 显示所有进程。
- **查看特定用户的进程**：`ps -u <username>`。
- **显示进程树**：`ps -ejH` 或 `ps axjf`。
- **查看僵死进程**：`ps aux | grep 'Z'`。

### 3. `top`

`top` 提供了一个实时更新的系统进程和资源使用的概览。

- **启动**：在命令行中输入 `top`。
- **排序**：按 `<` 或 `>` 来更改排序依据。
- **查看特定用户的进程**：按 `u`，然后输入用户名。

### 4. `pmap`

`pmap` 显示特定进程的内存映射。

- **用法**：`pmap <pid>`，其中 `<pid>` 是进程的 ID。
- **显示详细信息**：`pmap -x <pid>`。

### 5. `/proc` 文件系统

`/proc` 文件系统包含了大量描述系统和进程状态的文件。

- **查看系统信息**：`cat /proc/meminfo` 查看内存信息，`cat /proc/cpuinfo` 查看 CPU 信息。
- **查看负载平均值**：`cat /proc/loadavg` 显示系统的平均负载。
- **查看特定进程信息**：`cat /proc/<pid>/status` 显示特定进程的状态。

这些工具对于系统管理员和开发者来说是理解和诊断系统行为的宝贵资源。通过熟练使用这些工具，可以有效地监控系统性能，识别和解决问题。